@media screen and (max-width: 1024px) {
    /* Stack modal sections vertically */
    #customizeModal .modal-body {
        flex-direction: column;
        /* Remove scrolling from modal body on mobile and keep layout intact */
        overflow-y: hidden;
    }

    /* Sidebar buttons row at top */
    #customizeModal .modal-sidebar {
        flex-direction: row;
        justify-content: center;
        align-items: stretch;
        width: 100%;
        min-width: 0;
        padding: 16px;
        gap: 12px;
    }

    #customizeModal .sidebar-btn {
        flex: 1 1 0;
    }

    /* Variant selection sidebar full width */
    #product-sidebar {
        width: 100%;
        height: auto;
    }

    /* Visual zone below sidebars */
    #customizeModal .visual-zone {
        width: 100%;
        flex-grow: 1; /* Take remaining space within the modal body */
        height: 100%;
        /* Allow visual zone to handle scrolling */
        overflow-y: auto;
    }

    /* Display 2D/3D containers vertically */
    #customizeModal .visual-containers {
        flex-direction: column;
        padding: 16px;
        height: auto; /* allow 2D and 3D containers to size naturally */
    }

    #product2DContainer,
    #product3DContainer {
        width: 100%;
        max-width: 100%;
    }

    #product3DContainer {
        height: auto; /* override desktop 100% height */
        aspect-ratio: 1; /* square based on width */
    }

    #product3DContainer canvas {
        width: 100%;
        height: 100%;
        display: block;
    }

    .ratio-filter,
    .favorite-filter {
        padding: 6px 36px 6px 12px;
        border: 1px solid #666;
        border-radius: 20px;
        background-color: #333;
        color: #000;
        font-size: 14px;
        background-image: linear-gradient(45deg, transparent 50%, #000 50%),
            linear-gradient(135deg, #000 50%, transparent 50%);
        background-position: right 12px center, right 6px center;
        background-size: 6px 6px, 6px 6px;
        background-repeat: no-repeat;
    }

    /* Arrange image control icons on two rows */
    #customizeModal .visual-header {
        height: 80px;
    }

    #customizeModal .image-controls {
        flex-wrap: wrap;
        justify-content: center;
    }

    #customizeModal .image-controls button {
        width: calc(100% / 6 - 10px);
    }
}
